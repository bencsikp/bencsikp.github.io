<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The State of T1DM Treatment: An Interactive Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Calm Harmony -->
    <!-- Application Structure Plan: A top-level tabbed navigation SPA. The structure is thematic, not linear, to improve user experience. It's divided into 'Overview' (high-level summary), 'Current Treatments' (for understanding today's standard of care), 'Future of Care' (exploring cure research), and 'Research Hub' (an interactive database for publications, trials, and experts). This structure separates patient-centric information (current/future care) from deep-dive data (research hub), allowing users to choose their own exploration path based on their interests, which is more intuitive than the original report's linear format. -->
    <!-- Visualization & Content Choices:
        - Report Info: Key Metrics (TIR). Goal: Inform. Viz: Donut Chart. Interaction: Hover tooltip. Justification: Visualizes the primary therapeutic target effectively. Library: Chart.js.
        - Report Info: AID Systems Comparison. Goal: Compare. Viz: Interactive HTML Table. Interaction: Hover highlight. Justification: Preserves detailed data while improving readability. Library/Method: HTML/JS.
        - Report Info: Research Pipeline (Cellular, Immune, Tech). Goal: Organize. Viz: Multi-column card layout with status indicators. Interaction: Click to expand details. Justification: Organizes complex research streams into clear, parallel paths. Library/Method: HTML/Tailwind/JS.
        - Report Info: Publications & Clinical Trials Tables. Goal: Organize/Explore. Viz: Filterable/Searchable HTML Tables. Interaction: Real-time filtering via input/dropdowns. Justification: Transforms static data into a powerful, user-driven research tool. Library/Method: HTML/JS.
        - Report Info: Flow of technology (CGM -> AID). Goal: Show relationships. Viz: Diagram built with styled HTML divs and flexbox. Justification: More intuitive than text for showing process flow. Library/Method: HTML/Tailwind.
        - CONFIRMATION: NO SVG graphics used. NO Mermaid JS used.
    -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA;
            color: #343A40;
        }
        .nav-link {
            transition: color 0.2s, border-color 0.2s;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #0891B2;
            border-bottom-color: #0891B2;
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .stat-card {
            background-color: white;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 320px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 320px;
        }
        .tab-button {
            transition: all 0.2s;
        }
        .tab-button.active {
            background-color: #0891B2;
            color: white;
        }
        .table-search-input {
            border: 1px solid #CED4DA;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        .table-search-input:focus {
            outline: none;
            border-color: #0891B2;
            box-shadow: 0 0 0 2px rgba(8, 145, 178, 0.25);
        }
        .data-table tbody tr {
            transition: background-color 0.2s;
        }
        .data-table tbody tr:hover {
            background-color: #F1F5F9;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <h1 class="text-xl md:text-2xl font-bold text-slate-800">T1DM Treatment Report</h1>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#overview" class="nav-link px-2 py-1 text-slate-600 font-medium">Overview</a>
                    <a href="#current-treatments" class="nav-link px-2 py-1 text-slate-600 font-medium">Current Treatments</a>
                    <a href="#future-of-care" class="nav-link px-2 py-1 text-slate-600 font-medium">Future of Care</a>
                    <a href="#research-hub" class="nav-link px-2 py-1 text-slate-600 font-medium">Research Hub</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-cyan-500 focus:ring-cyan-500">
                        <option value="overview">Overview</option>
                        <option value="current-treatments">Current Treatments</option>
                        <option value="future-of-care">Future of Care</option>
                        <option value="research-hub">Research Hub</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <section id="overview" class="content-section animate-fade-in">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-5xl font-extrabold text-cyan-700 mb-4">The Inflection Point in T1DM Care</h2>
                <p class="max-w-3xl mx-auto text-lg text-slate-600">The treatment landscape for Type 1 Diabetes is undergoing a revolutionary shift. We are moving beyond managing the disease towards a future of functional cures. This report explores the two parallel fronts of this transformation: optimizing daily management with groundbreaking technology and advancing curative therapies that target the root cause of the disease.</p>
            </div>

            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="stat-card p-6">
                    <h3 class="font-bold text-xl text-slate-800 mb-2">Disease Modification is Here</h3>
                    <p class="text-slate-600 mb-4">Teplizumab (Tzield‚Ñ¢) is the first approved therapy to delay the onset of clinical T1DM.</p>
                    <p class="text-4xl font-extrabold text-cyan-600">~3 Years</p>
                    <p class="font-medium text-slate-500">Median delay in onset for at-risk individuals.</p>
                </div>
                <div class="stat-card p-6">
                    <h3 class="font-bold text-xl text-slate-800 mb-2">The "Artificial Pancreas"</h3>
                    <p class="text-slate-600 mb-4">Automated Insulin Delivery (AID) systems are now the standard of care, dramatically improving quality of life.</p>
                    <p class="text-4xl font-extrabold text-cyan-600">>70%</p>
                    <p class="font-medium text-slate-500">Target "Time in Range" achieved by modern AID systems.</p>
                </div>
                <div class="stat-card p-6 lg:col-span-1 md:col-span-2">
                    <h3 class="font-bold text-xl text-slate-800 mb-2">A Cure in Sight?</h3>
                    <p class="text-slate-600 mb-4">Stem cell therapies are restoring insulin production in clinical trials, offering hope for insulin independence.</p>
                    <p class="text-4xl font-extrabold text-cyan-600">83%</p>
                    <p class="font-medium text-slate-500">of trial patients on VX-880 achieved insulin independence.</p>
                </div>
            </div>

            <div class="bg-white p-8 rounded-xl shadow-lg mt-12">
                <h3 class="text-2xl font-bold text-center text-slate-800 mb-2">The Path to a Functional Cure</h3>
                <p class="text-slate-600 text-center max-w-4xl mx-auto mb-8">Progress is advancing on multiple, interconnected fronts. Replacing lost cells provides the 'factory,' while retraining the immune system provides the 'protection' necessary for a lasting cure. Enabling technologies like encapsulation and gene editing are the keys to making these therapies widely available without the need for systemic immunosuppression.</p>
                <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4 text-center">
                    <div class="p-4 rounded-lg bg-slate-100 w-full md:w-1/3">
                        <span class="text-3xl">üî¨</span>
                        <h4 class="font-bold text-lg mt-2">Cell Replacement</h4>
                        <p class="text-sm text-slate-600">Using stem cells to grow new, functional insulin-producing islets.</p>
                    </div>
                    <div class="font-bold text-2xl text-cyan-500 transform md:rotate-0 rotate-90">+</div>
                    <div class="p-4 rounded-lg bg-slate-100 w-full md:w-1/3">
                        <span class="text-3xl">üõ°Ô∏è</span>
                        <h4 class="font-bold text-lg mt-2">Immunotherapy</h4>
                        <p class="text-sm text-slate-600">Re-educating the immune system to stop its attack on beta cells.</p>
                    </div>
                    <div class="font-bold text-2xl text-cyan-500 transform md:rotate-0 rotate-90">=</div>
                     <div class="p-4 rounded-lg bg-cyan-600 text-white w-full md:w-1/3">
                        <span class="text-3xl">üèÜ</span>
                        <h4 class="font-bold text-lg mt-2">Durable Cure</h4>
                        <p class="text-sm text-cyan-100">Restored glucose control without constant injections or immunosuppression.</p>
                    </div>
                </div>
            </div>

        </section>

        <section id="current-treatments" class="content-section">
            <div class="text-left mb-12">
                <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800 mb-3">Today's Standard of Care</h2>
                <p class="max-w-4xl text-lg text-slate-600">Modern T1DM management is a synergy of advanced insulin, real-time data from glucose monitors, and intelligent automation. The goal is to mimic a healthy pancreas as closely as possible, minimizing the disease's daily burden and preventing long-term complications. This section explores the interconnected pillars of current therapy.</p>
            </div>
            
            <div id="treatments-tabs-container" class="mb-6 flex flex-wrap justify-center gap-2"></div>
            <div id="treatments-content-container"></div>
        </section>

        <section id="future-of-care" class="content-section">
            <div class="text-left mb-12">
                <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800 mb-3">The Frontier: Towards a Functional Cure</h2>
                <p class="max-w-4xl text-lg text-slate-600">While current technology is life-changing, it doesn't cure the disease. The ultimate goal is to restore the body's natural ability to regulate glucose. Research is rapidly advancing on three core fronts: replacing the lost cells, halting the autoimmune attack, and developing technologies to protect new cells from the immune system.</p>
            </div>

            <div class="grid lg:grid-cols-3 gap-8">
                <div id="future-cellular" class="bg-white p-6 rounded-lg shadow-md"></div>
                <div id="future-immuno" class="bg-white p-6 rounded-lg shadow-md"></div>
                <div id="future-enabling" class="bg-white p-6 rounded-lg shadow-md"></div>
            </div>
        </section>
        
        <section id="research-hub" class="content-section">
            <div class="text-left mb-12">
                <h2 class="text-3xl md:text-4xl font-extrabold text-slate-800 mb-3">Interactive Research Hub</h2>
                <p class="max-w-4xl text-lg text-slate-600">This hub provides an interactive gateway to the data driving T1DM innovation. Explore the latest peer-reviewed publications, track ongoing clinical trials testing novel therapies, and discover the key institutions and experts leading the charge towards a cure. Use the search and filter tools to find the information most relevant to you.</p>
            </div>
            
            <div id="hub-tabs-container" class="mb-6 flex flex-wrap justify-center gap-2"></div>
            <div id="hub-content-container" class="bg-white p-4 sm:p-6 rounded-xl shadow-lg"></div>
        </section>

    </main>
    <script>
        document.addEventListener('DOMContentLoaded', () => {

            const appData = {
                treatments: {
                    "Technology Synergy": {
                        title: "Technology Synergy: The Modern T1DM Ecosystem",
                        content: `
                            <div class="bg-white p-6 md:p-8 rounded-xl shadow-lg">
                                <h3 class="text-2xl font-bold text-center text-slate-800 mb-2">The Path from Data to Action</h3>
                                <p class="text-slate-600 text-center max-w-4xl mx-auto mb-8">Effective T1DM management is a closed loop of monitoring, decision-making, and insulin delivery. Technology has automated and optimized each step of this process, significantly reducing the cognitive burden on individuals and improving safety.</p>
                                <div class="flex flex-col md:flex-row items-stretch justify-center space-y-4 md:space-y-0 md:space-x-4 text-center">
                                    <div class="p-4 rounded-lg bg-slate-50 border border-slate-200 flex flex-col justify-center w-full md:w-1/4">
                                        <div class="text-4xl mb-2">üëÅÔ∏è</div>
                                        <h4 class="font-bold text-lg">1. Monitor</h4>
                                        <p class="text-sm text-slate-600 flex-grow">Continuous Glucose Monitors (CGM) provide real-time data on glucose levels and trends, 24/7.</p>
                                    </div>
                                    <div class="font-bold text-3xl text-cyan-400 flex items-center justify-center transform md:rotate-0 rotate-90">&rarr;</div>
                                    <div class="p-4 rounded-lg bg-slate-50 border border-slate-200 flex flex-col justify-center w-full md:w-1/4">
                                        <div class="text-4xl mb-2">üß†</div>
                                        <h4 class="font-bold text-lg">2. Decide</h4>
                                        <p class="text-sm text-slate-600 flex-grow">A sophisticated control algorithm predicts future glucose levels and decides how to adjust insulin.</p>
                                    </div>
                                    <div class="font-bold text-3xl text-cyan-400 flex items-center justify-center transform md:rotate-0 rotate-90">&rarr;</div>
                                    <div class="p-4 rounded-lg bg-slate-50 border border-slate-200 flex flex-col justify-center w-full md:w-1/4">
                                        <div class="text-4xl mb-2">üíß</div>
                                        <h4 class="font-bold text-lg">3. Act</h4>
                                        <p class="text-sm text-slate-600 flex-grow">An insulin pump automatically delivers precise micro-doses of insulin to keep glucose in range.</p>
                                    </div>
                                </div>
                            </div>
                        `,
                    },
                    "Glucose Monitoring & Key Metrics": {
                        title: "Glucose Monitoring & Key Metrics",
                        content: `
                            <div class="grid lg:grid-cols-2 gap-8 items-center">
                                <div>
                                    <h3 class="text-2xl font-bold text-slate-800 mb-4">From Snapshot to Movie: The CGM Revolution</h3>
                                    <p class="text-slate-600 mb-4">Continuous Glucose Monitoring (CGM) has transformed T1DM care by shifting focus from single finger-prick measurements to a continuous stream of data. This provides a dynamic view of glucose trends, enabling proactive adjustments and alarms for high and low levels.</p>
                                    <p class="text-slate-600 mb-4">This wealth of data has introduced new, more powerful metrics for assessing glycemic control beyond the traditional 3-month HbA1c average. The primary metric is now <strong>Time in Range (TIR)</strong>.</p>
                                    <ul class="space-y-2 list-disc list-inside text-slate-600">
                                        <li><strong>Time in Range (TIR):</strong> % of time spent in target glucose range (typically 70-180 mg/dL). The international consensus target is >70%.</li>
                                        <li><strong>Time Below Range (TBR):</strong> % of time spent in hypoglycemia. The target is <4%.</li>
                                        <li><strong>Time Above Range (TAR):</strong> % of time spent in hyperglycemia. The goal is to minimize this.</li>
                                    </ul>
                                </div>
                                <div>
                                    <div class="chart-container">
                                        <canvas id="tirChart"></canvas>
                                    </div>
                                    <p class="text-center text-sm text-slate-500 mt-2">Visualizing the International Consensus Target for Time in Range.</p>
                                </div>
                            </div>
                        `,
                    },
                    "Automated Insulin Delivery (AID)": {
                        title: "Automated Insulin Delivery (AID) Systems",
                        content: `
                            <div>
                                <h3 class="text-2xl font-bold text-slate-800 mb-4">The "Artificial Pancreas": A New Standard of Care</h3>
                                <p class="text-slate-600 mb-6">AID systems, or hybrid closed-loops, are the pinnacle of current diabetes technology. They integrate a CGM and an insulin pump with a smart algorithm to automatically adjust insulin delivery 24/7. This dramatically increases Time in Range, reduces hypoglycemia, and lessens the cognitive burden of T1DM. Below is a comparison of major commercially available systems.</p>
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left border-collapse">
                                        <thead>
                                            <tr>
                                                <th class="p-3 font-semibold uppercase bg-slate-100 text-slate-600 border border-slate-200">System</th>
                                                <th class="p-3 font-semibold uppercase bg-slate-100 text-slate-600 border border-slate-200">Pump Type</th>
                                                <th class="p-3 font-semibold uppercase bg-slate-100 text-slate-600 border border-slate-200">Key Feature</th>
                                                <th class="p-3 font-semibold uppercase bg-slate-100 text-slate-600 border border-slate-200">Approved Age</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white">
                                            <tr class="data-table"><td><strong class="text-slate-700 p-3 block">Medtronic MiniMed 780G</strong></td><td class="p-3 border border-slate-200">Tubed</td><td class="p-3 border border-slate-200">Automated correction boluses every 5 mins</td><td class="p-3 border border-slate-200">7+</td></tr>
                                            <tr class="data-table"><td><strong class="text-slate-700 p-3 block">Tandem t:slim X2 w/ Control-IQ</strong></td><td class="p-3 border border-slate-200">Tubed</td><td class="p-3 border border-slate-200">Sleep/Exercise activity settings</td><td class="p-3 border border-slate-200">4+</td></tr>
                                            <tr class="data-table"><td><strong class="text-slate-700 p-3 block">Insulet Omnipod 5</strong></td><td class="p-3 border border-slate-200">Tubeless Pod</td><td class="p-3 border border-slate-200">Tubeless design; customizable glucose target</td><td class="p-3 border border-slate-200">2+</td></tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        `,
                    },
                     "Disease-Modifying & Adjunctive Drugs": {
                        title: "Disease-Modifying & Adjunctive Drugs",
                        content: `
                            <div>
                                <h3 class="text-2xl font-bold text-slate-800 mb-4">Beyond Insulin: New Pharmacological Tools</h3>
                                <p class="text-slate-600 mb-6">While insulin is essential, a new class of therapies is emerging that can alter the disease course or supplement insulin to improve control.</p>
                                <div class="space-y-6">
                                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                                        <h4 class="font-bold text-lg text-cyan-700">Disease-Modifying: Teplizumab (Tzield‚Ñ¢)</h4>
                                        <p class="text-slate-600 mt-1">A monumental achievement, this anti-CD3 monoclonal antibody is the first therapy that can change the course of T1DM. By modulating the immune system, it can delay the clinical onset of the disease in at-risk individuals and preserve the function of remaining beta cells in those newly diagnosed.</p>
                                    </div>
                                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                                        <h4 class="font-bold text-lg text-cyan-700">Adjunctive Therapy: GLP-1 / SGLT-2 Agents</h4>
                                        <p class="text-slate-600 mt-1">Originally for T2DM, drugs like GLP-1 agonists (e.g., semaglutide) and SGLT-2 inhibitors are used off-label in T1DM. They can help reduce insulin needs, assist with weight management, and smooth out post-meal glucose spikes, though SGLT-2 inhibitors carry a risk of euglycemic DKA.</p>
                                    </div>
                                </div>
                            </div>
                        `
                    },
                },
                future: {
                    cellular: {
                        title: "1. Cellular Replacement",
                        intro: "This is the most direct path to a cure: replacing the destroyed insulin-producing cells with new, functional ones derived from stem cells. The goal is to create a theoretically unlimited supply of islets that can restore natural glucose control.",
                        therapies: [
                            { name: "Vertex VX-880 (Zimislecel)", status: "Phase 3", description: "Stem-cell derived islets infused into the portal vein. Requires immunosuppression but has shown ability to restore insulin independence in a majority of trial participants." },
                            { name: "Lantidra (Donislecel)", status: "FDA Approved", description: "The first approved cell therapy, using islets from deceased donors for those with severe hypoglycemia. Validated the approach but limited by donor supply." },
                            { name: "Autologous iPSC Therapy", status: "Proof of Concept", description: "A personalized approach using a patient's own reprogrammed cells. A recent case in China showed a patient achieving insulin independence, avoiding immune rejection of foreign cells." }
                        ]
                    },
                    immuno: {
                        title: "2. Immunotherapy",
                        intro: "This approach tackles the root cause: the autoimmune attack. The goal is to re-educate the immune system to tolerate beta cells, preserving function in the newly diagnosed and protecting transplanted cells in the future.",
                        therapies: [
                             { name: "Teplizumab (Tzield‚Ñ¢)", status: "FDA Approved", description: "An anti-CD3 antibody that modulates T-cells. Delays disease onset and preserves function in the newly diagnosed." },
                            { name: "TNF-Œ± & JAK Inhibitors", status: "Phase 2/3", description: "Targeting specific inflammatory pathways (e.g., with Golimumab or Baricitinib) has shown significant promise in preserving beta-cell function in recent trials." },
                            { name: "Rituximab", status: "Investigational", description: "An antibody that depletes B-cells, which play a role in the autoimmune process. Has shown a temporary effect in slowing C-peptide decline." }
                        ]
                    },
                    enabling: {
                        title: "3. Enabling Technologies",
                        intro: "To make cell therapies a widespread reality, we must overcome the need for chronic immunosuppression. These technologies aim to shield or hide the new cells from the immune system.",
                        therapies: [
                            { name: "Encapsulation (e.g., Vertex VX-264)", status: "Phase 1/2", description: "Placing stem-cell islets inside a device that physically blocks immune cells but allows insulin and glucose to pass. Trials are underway without any immunosuppression drugs." },
                            { name: "Gene Editing (CRISPR)", status: "Phase 1/2", description: "Using CRISPR to edit the stem cells to make them 'invisible' to the immune system by removing their identifying surface proteins (HLA). Early trials are showing promising results." },
                        ]
                    }
                },
                hub: {
                    publications: [
                        { title: "Stem Cell‚ÄìDerived, Fully Differentiated Islets for Type 1 Diabetes", author: "Reichman TW, et al.", journal: "New England Journal of Medicine", year: 2025, link: "https://www.nejm.org/doi/full/10.1056/NEJMoa2310443", category: "Cellular Therapy" },
                        { title: "Breakthrough Drug Helps Children with New-Onset Type 1 Diabetes", author: "Gitelman SE, et al.", journal: "New England Journal of Medicine", year: 2023, link: "https://www.ucsf.edu/news/2023/10/426396/breakthrough-drug-helps-children-new-onset-type-1-diabetes", category: "Immunotherapy" },
                        { title: "Positive Six-Month Clinical Results from Type 1 Diabetes Study of Islet Cell Transplantation Without Immunosuppression", author: "Sana Biotechnology", journal: "Sana Press Release", year: 2025, link: "https://ir.sana.com/news-releases/news-release-details/sana-biotechnology-announces-positive-six-month-clinical-results", category: "Gene Editing" },
                        { title: "Efficacy and Safety of Automated Insulin Delivery Systems in Patients with Type 1 Diabetes Mellitus: A Systematic Review and Meta-Analysis", author: "Fan W, et al.", journal: "Diabetes & Metabolism Journal", year: 2025, link: "https://www.e-dmj.org/journal/view.php?doi=10.4093/dmj.2024.0130", category: "Technology (AID)" },
                        { title: "The Management of Type 1 Diabetes in Adults: A Consensus Report by the ADA and the EASD", author: "Holt RIG, et al.", journal: "Diabetes Care", year: 2021, link: "https://diabetesjournals.org/care/article/44/11/2589/138492/The-Management-of-Type-1-Diabetes-in-Adults-A", category: "General Management" },
                        { title: "TNF-Œ± inhibitors for type 1 diabetes: exploring the path to a pivotal clinical trial", author: "Bazile C, et al.", journal: "Frontiers in Immunology", year: 2024, link: "https://www.frontiersin.org/articles/10.3389/fimmu.2024.1470677/full", category: "Immunotherapy" },
                        { title: "Clinical trial finds new benefits of semaglutide for adults with type 1 diabetes", author: "Ahmann A, et al.", journal: "NEJM Evidence", year: 2025, link: "https://www.news-medical.net/news/20250623/Clinical-trial-finds-new-benefits-of-semaglutide-for-adults-with-type-1-diabetes.aspx", category: "Adjunctive Therapy" },
                    ],
                    trials: [
                        { name: "FORWARD-101 (VX-880)", intervention: "Zimislecel (ESC-derived islets)", phase: "1/2/3", status: "Recruiting", category: "Cellular Therapy" },
                        { name: "VX-264", intervention: "Encapsulated ESC-derived islets", phase: "1/2", status: "Recruiting", category: "Encapsulation" },
                        { name: "UP421", intervention: "HIP-engineered donor islets", phase: "1", status: "Active", category: "Gene Editing" },
                        { name: "JAKPOT T1D", intervention: "Abrocitinib / Ritlecitinib", phase: "2", status: "Recruiting", category: "Immunotherapy" },
                        { name: "DIAGNODE-3", intervention: "Diamyd¬Æ (GAD-alum)", phase: "3", status: "Recruiting", category: "Immunotherapy" },
                        { name: "Ver-A-T1D", intervention: "Verapamil SR", phase: "2", status: "Active", category: "Immunotherapy" },
                        { name: "QWINT-5", intervention: "Efsitora alfa (weekly insulin)", phase: "3", status: "Ongoing", category: "Technology (AID)" },
                    ],
                    experts: [
                        { name: "Vertex Pharmaceuticals", location: "Boston, MA", type: "Institution", expertise: "Leader in stem-cell derived therapies (VX-880, VX-264)." },
                        { name: "UCSF", location: "San Francisco, CA", type: "Institution", expertise: "Pioneering center for T1DM immunotherapy, led Teplizumab trials." },
                        { name: "Harvard Stem Cell Institute", location: "Cambridge, MA", type: "Institution", expertise: "Foundational basic science in differentiating stem cells to beta cells." },
                        { name: "University of Virginia (UVA)", location: "Charlottesville, VA", type: "Institution", expertise: "Premier center for developing 'artificial pancreas' algorithms." },
                        { name: "Medical University of Graz", location: "Graz, Austria", type: "Institution", expertise: "Central hub for European clinical trials (INNODIA)." },
                        { name: "University of Oxford", location: "Oxford, UK", type: "Institution", expertise: "World-leading center for islet transplantation and cell therapy trials." },
                        { name: "Thomas Pieber, MD", location: "Medical University of Graz", type: "Expert", expertise: "Lead investigator for major European T1DM trials." },
                        { name: "Stephen Gitelman, MD", location: "UCSF", type: "Expert", expertise: "Key clinical investigator for Teplizumab and immunotherapy." },
                        { name: "Trevor Reichman, MD, PhD", location: "UHN, Toronto", type: "Expert", expertise: "Lead author on groundbreaking VX-880 stem cell trial." },
                        { name: "Doug Melton, PhD", location: "Harvard", type: "Expert", expertise: "Pioneered the science of creating beta cells from stem cells." },
                    ]
                }
            };
            
            const mainNavLinks = document.querySelectorAll('header .nav-link');
            const mobileNav = document.getElementById('mobile-nav');
            const sections = document.querySelectorAll('.content-section');
            let tirChartInstance = null;
            
            function updateNav(hash) {
                const cleanHash = hash.replace('#', '');
                mainNavLinks.forEach(link => {
                    link.classList.toggle('active', link.getAttribute('href') === hash);
                });
                sections.forEach(section => {
                    section.classList.toggle('active', section.id === cleanHash);
                });
                if(mobileNav.value !== cleanHash) mobileNav.value = cleanHash;
                
                if (cleanHash === 'current-treatments' && !tirChartInstance) {
                     setTimeout(createTIRChart, 100);
                }
            }

            function createTIRChart() {
                if (document.getElementById('tirChart') && !tirChartInstance) {
                    const ctx = document.getElementById('tirChart').getContext('2d');
                    tirChartInstance = new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            labels: ['Time in Range (>70%)', 'Time Below/Above Range'],
                            datasets: [{
                                data: [70, 30],
                                backgroundColor: ['#06B6D4', '#E5E7EB'],
                                borderColor: ['#FFFFFF', '#FFFFFF'],
                                borderWidth: 4,
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            cutout: '70%',
                            plugins: {
                                legend: { position: 'bottom' },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            return `${context.label}: ${context.raw}%`;
                                        }
                                    }
                                }
                            }
                        }
                    });
                }
            }
            
            function handleNavigation() {
                const hash = window.location.hash || '#overview';
                updateNav(hash);
            }

            mainNavLinks.forEach(link => {
                link.addEventListener('click', e => {
                    e.preventDefault();
                    history.pushState(null, '', e.target.href);
                    handleNavigation();
                });
            });

            mobileNav.addEventListener('change', (e) => {
                const hash = `#${e.target.value}`;
                history.pushState(null, '', hash);
                handleNavigation();
            });
            
            window.addEventListener('popstate', handleNavigation);

            function setupTabs(containerId, contentContainerId, data) {
                const tabContainer = document.getElementById(containerId);
                const contentContainer = document.getElementById(contentContainerId);
                const tabs = Object.keys(data);
                
                tabContainer.innerHTML = tabs.map(tab => `
                    <button class="tab-button px-4 py-2 text-sm md:text-base font-medium rounded-md bg-white border border-slate-200 text-slate-600" data-tab="${tab}">${tab}</button>
                `).join('');

                const tabButtons = tabContainer.querySelectorAll('.tab-button');
                
                function activateTab(tabKey) {
                    tabButtons.forEach(btn => {
                        btn.classList.toggle('active', btn.dataset.tab === tabKey);
                    });
                    contentContainer.innerHTML = `<div class="bg-white p-4 sm:p-6 rounded-xl shadow-inner">${data[tabKey].content}</div>`;
                    
                    if(tabKey === "Glucose Monitoring & Key Metrics" && !tirChartInstance){
                         setTimeout(createTIRChart, 50);
                    } else if (tirChartInstance && tabKey !== "Glucose Monitoring & Key Metrics") {
                         tirChartInstance.destroy();
                         tirChartInstance = null;
                    }
                }

                tabButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        activateTab(button.dataset.tab);
                    });
                });
                
                activateTab(tabs[0]);
            }
            
            function setupFutureOfCare() {
                const { cellular, immuno, enabling } = appData.future;
                
                function renderColumn(containerId, data) {
                    const container = document.getElementById(containerId);
                    const therapyHtml = data.therapies.map(t => `
                        <div class="border-t border-slate-200 pt-4 mt-4">
                            <div class="flex justify-between items-center">
                                <h4 class="font-bold text-slate-800">${t.name}</h4>
                                <span class="text-xs font-semibold px-2 py-1 rounded-full ${t.status.includes('Approved') ? 'bg-green-100 text-green-800' : 'bg-blue-100 text-blue-800'}">${t.status}</span>
                            </div>
                            <p class="text-sm text-slate-600 mt-1">${t.description}</p>
                        </div>
                    `).join('');
                    
                    container.innerHTML = `
                        <div class="flex items-center gap-4 mb-4">
                           <h3 class="text-xl font-bold text-cyan-700">${data.title}</h3>
                        </div>
                        <p class="text-slate-600 mb-4">${data.intro}</p>
                        ${therapyHtml}
                    `;
                }

                renderColumn('future-cellular', cellular);
                renderColumn('future-immuno', immuno);
                renderColumn('future-enabling', enabling);
            }
            
            function setupResearchHub() {
                const hubTabsContainer = document.getElementById('hub-tabs-container');
                const hubContentContainer = document.getElementById('hub-content-container');
                const tabs = {
                    "Publications": renderPublications,
                    "Clinical Trials": renderTrials,
                    "Key Players": renderExperts
                };

                hubTabsContainer.innerHTML = Object.keys(tabs).map(tab => `
                    <button class="tab-button px-4 py-2 text-sm md:text-base font-medium rounded-md bg-slate-100 border border-slate-200 text-slate-600" data-tab="${tab}">${tab}</button>
                `).join('');

                const tabButtons = hubTabsContainer.querySelectorAll('.tab-button');

                function activateTab(tabKey) {
                    tabButtons.forEach(btn => btn.classList.toggle('active', btn.dataset.tab === tabKey));
                    tabs[tabKey]();
                }

                tabButtons.forEach(button => button.addEventListener('click', () => activateTab(button.dataset.tab)));
                
                activateTab("Publications");
            }
            
            function renderPublications() {
                const container = document.getElementById('hub-content-container');
                const categories = [...new Set(appData.hub.publications.map(p => p.category))];
                container.innerHTML = `
                    <div class="mb-4 flex flex-col sm:flex-row gap-4">
                        <input type="text" id="pub-search" placeholder="Search publications by title or author..." class="table-search-input w-full px-3 py-2 rounded-md text-sm">
                        <select id="pub-category" class="table-search-input w-full sm:w-1/3 px-3 py-2 rounded-md text-sm">
                            <option value="">All Categories</option>
                            ${categories.map(c => `<option value="${c}">${c}</option>`).join('')}
                        </select>
                    </div>
                    <div class="overflow-x-auto"><table class="w-full text-sm text-left"><thead class="bg-slate-50"><tr><th class="p-3">Title</th><th class="p-3">Journal</th><th class="p-3">Year</th><th class="p-3">Category</th></tr></thead><tbody id="pub-table-body"></tbody></table></div>
                `;

                const searchInput = document.getElementById('pub-search');
                const categorySelect = document.getElementById('pub-category');
                const tableBody = document.getElementById('pub-table-body');
                
                function filterAndRender() {
                    const searchTerm = searchInput.value.toLowerCase();
                    const category = categorySelect.value;
                    const filteredData = appData.hub.publications.filter(p => {
                        const matchesSearch = p.title.toLowerCase().includes(searchTerm) || p.author.toLowerCase().includes(searchTerm);
                        const matchesCategory = category ? p.category === category : true;
                        return matchesSearch && matchesCategory;
                    });
                    
                    tableBody.innerHTML = filteredData.map(p => `
                        <tr class="border-b border-slate-200 data-table">
                            <td class="p-3"><a href="${p.link}" target="_blank" class="font-semibold text-cyan-700 hover:underline">${p.title}</a><div class="text-slate-500 text-xs">${p.author}</div></td>
                            <td class="p-3 text-slate-600">${p.journal}</td>
                            <td class="p-3 text-slate-600">${p.year}</td>
                            <td class="p-3 text-slate-600">${p.category}</td>
                        </tr>
                    `).join('');
                }
                
                searchInput.addEventListener('input', filterAndRender);
                categorySelect.addEventListener('change', filterAndRender);
                filterAndRender();
            }
            
            function renderTrials() {
                const container = document.getElementById('hub-content-container');
                const categories = [...new Set(appData.hub.trials.map(t => t.category))];
                container.innerHTML = `
                    <div class="mb-4 flex flex-col sm:flex-row gap-4">
                        <input type="text" id="trial-search" placeholder="Search trials by name or intervention..." class="table-search-input w-full px-3 py-2 rounded-md text-sm">
                         <select id="trial-category" class="table-search-input w-full sm:w-1/3 px-3 py-2 rounded-md text-sm">
                            <option value="">All Categories</option>
                            ${categories.map(c => `<option value="${c}">${c}</option>`).join('')}
                        </select>
                    </div>
                    <div class="overflow-x-auto"><table class="w-full text-sm text-left"><thead class="bg-slate-50"><tr><th class="p-3">Trial Name</th><th class="p-3">Intervention</th><th class="p-3">Phase</th><th class="p-3">Status</th></tr></thead><tbody id="trial-table-body"></tbody></table></div>
                `;

                const searchInput = document.getElementById('trial-search');
                const categorySelect = document.getElementById('trial-category');
                const tableBody = document.getElementById('trial-table-body');

                function filterAndRender() {
                    const searchTerm = searchInput.value.toLowerCase();
                    const category = categorySelect.value;
                    const filteredData = appData.hub.trials.filter(t => {
                         const matchesSearch = t.name.toLowerCase().includes(searchTerm) || t.intervention.toLowerCase().includes(searchTerm);
                         const matchesCategory = category ? t.category === category : true;
                         return matchesSearch && matchesCategory;
                    });

                    tableBody.innerHTML = filteredData.map(t => `
                        <tr class="border-b border-slate-200 data-table">
                            <td class="p-3 font-semibold text-slate-700">${t.name}</td>
                            <td class="p-3 text-slate-600">${t.intervention}</td>
                            <td class="p-3 text-slate-600">${t.phase}</td>
                            <td class="p-3"><span class="px-2 py-1 text-xs font-semibold rounded-full ${t.status === 'Recruiting' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800'}">${t.status}</span></td>
                        </tr>
                    `).join('');
                }
                
                searchInput.addEventListener('input', filterAndRender);
                categorySelect.addEventListener('change', filterAndRender);
                filterAndRender();
            }

            function renderExperts() {
                const container = document.getElementById('hub-content-container');
                container.innerHTML = `
                    <div class="mb-4 flex flex-col sm:flex-row gap-4">
                        <input type="text" id="expert-search" placeholder="Search by name, location, or expertise..." class="table-search-input w-full px-3 py-2 rounded-md text-sm">
                    </div>
                    <div id="expert-grid" class="grid md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                `;

                const searchInput = document.getElementById('expert-search');
                const gridContainer = document.getElementById('expert-grid');
                
                function filterAndRender() {
                    const searchTerm = searchInput.value.toLowerCase();
                    const filteredData = appData.hub.experts.filter(e => 
                        e.name.toLowerCase().includes(searchTerm) ||
                        e.location.toLowerCase().includes(searchTerm) ||
                        e.expertise.toLowerCase().includes(searchTerm)
                    );
                    
                    gridContainer.innerHTML = filteredData.map(e => `
                        <div class="border border-slate-200 bg-white rounded-lg p-4">
                           <div class="flex items-center justify-between mb-2">
                             <h4 class="font-bold text-slate-800">${e.name}</h4>
                             <span class="text-xs font-semibold px-2 py-1 rounded-full ${e.type === 'Institution' ? 'bg-indigo-100 text-indigo-800' : 'bg-sky-100 text-sky-800'}">${e.type}</span>
                           </div>
                           <p class="text-xs text-slate-500 mb-2">${e.location}</p>
                           <p class="text-sm text-slate-600">${e.expertise}</p>
                        </div>
                    `).join('');
                }
                searchInput.addEventListener('input', filterAndRender);
                filterAndRender();
            }

            setupTabs('treatments-tabs-container', 'treatments-content-container', appData.treatments);
            setupFutureOfCare();
            setupResearchHub();
            handleNavigation();
        });
    </script>

</body>
</html>

